<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
	<resultMap type="map" id="memberMap"></resultMap>
	<select id="selectMemberList" resultMap="memberMap">
	select * 
	from member
	where status='U'
	</select>
	<select id="selectRealtorList" resultMap="memberMap">
	select * 
	from member
	where status='B'
	</select>
	<select id="selectReportList" resultType="map">
	select * 
	from report_estate
	</select>
	<select id="selectMemberEmail" resultType="string">
	select member_email
	from member
	where member_no=#{recipient}
	</select>
	<select id="newsInsert" resultType="map">
	insert into news
	values (
		seq_news_no.nextval,
		#{newsTitle},
		#{newsLink},
		#{newsContent},
		#{newsDate},
		#{newsAuthor},
		#{newsCategory}
	)
	</select>
	
	<select id="selectAllNews" resultType="map">
	select *
	from news
	order by news_date desc
	</select>
	
	<select id="selectAllNotice" resultType="map">
	select *
	from notice
	order by written_date desc
	</select>
	
	<insert id="insertNotice">
	insert into notice
	values(
		seq_notice_no.nextval,
		#{noticeTitle},
		#{noticeContent},
		default
	)
	</insert>
	
	<select id="newsTotalPage" resultType="_int">
	select count(*) cnt
	from news
	</select>
	
	<select id="noticeTotalPage" resultType="_int">
	select count(*) cnt
	from notice
	</select>
	
	<select id="memberTotalPage" resultType="_int">
	select count(*) cnt
	from member
	where status='U'
	</select>
	
	<select id="realtorTotalPage" resultType="_int">
	select count(*) cnt
	from member
	where status='B'
	</select>
	
	<select id="reportTotalPage" resultType="_int">
	select count(*) cnt
	from report_estate
	</select>
	
	<select id="selectRecentNews" resultType="map">
	select a.*
	from (
		select * 
		from news
		order by news_no desc) a
	where rownum <![CDATA[ <= ]]> 5
	</select>
	
	<select id="selectRecentNotice" resultType="map">
	select a.*
	from (
		select * 
		from notice
		order by notice_no desc) a
	where rownum <![CDATA[ <= ]]> 5
	</select>
	
	<delete id="deleteNotice">
	delete from notice
	where notice_no = #{noticeNo}
	</delete>
	
	<select id="selectOneNotice" resultType="map">
	select *
	from notice
	where notice_no=#{noticeNo}
	</select>
</mapper>